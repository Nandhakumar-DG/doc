"use strict";(globalThis.webpackChunkdev_setup=globalThis.webpackChunkdev_setup||[]).push([[4084],{5074:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Tag-scripts/opc-to-memory","title":"OPC to MEMORY Tag Conversion","description":"OPC to MEMORY tag conversion in Ignition involves transforming data from OPC data sources into MEMORY tags for local storage and manipulation. This allows you to bridge external OPC data sources with internal memory-based operations.","source":"@site/scripts/Tag-scripts/opc-to-memory.md","sourceDirName":"Tag-scripts","slug":"/Tag-scripts/opc-to-memory","permalink":"/doc/scripts/Tag-scripts/opc-to-memory","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"scriptsSidebar","previous":{"title":"Tag Scripts","permalink":"/doc/scripts/category/tag-scripts"},"next":{"title":"Create TagPaths of History Provider Tags","permalink":"/doc/scripts/Tag-scripts/create-tagpaths-history-provider"}}');var a=n(4848),s=n(8453);const o={sidebar_position:1},i="OPC to MEMORY Tag Conversion",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Description",id:"description",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Conversion Script",id:"conversion-script",level:2},{value:"Usage",id:"usage",level:2},{value:"Returns",id:"returns",level:2}];function c(t){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...t.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"opc-to-memory-tag-conversion",children:"OPC to MEMORY Tag Conversion"})}),"\n",(0,a.jsx)(e.p,{children:"OPC to MEMORY tag conversion in Ignition involves transforming data from OPC data sources into MEMORY tags for local storage and manipulation. This allows you to bridge external OPC data sources with internal memory-based operations."}),"\n",(0,a.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(e.p,{children:"MEMORY tags are stored locally in the Gateway's memory and can be used to:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Use OPC values for faster access and Testing"}),"\n",(0,a.jsx)(e.li,{children:"Store intermediate calculation results"}),"\n",(0,a.jsx)(e.li,{children:"Create derived or transformed data from OPC sources"}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"description",children:"Description"}),"\n",(0,a.jsxs)(e.p,{children:["This Script to convert Opc tags to Memory tags, It Converts all the OPC tag to memory ",(0,a.jsx)(e.strong,{children:"only if its Bool / Int / Float"})," and ignoring other datatype like string.  ",(0,a.jsx)(e.code,{children:"Runs this script in Script Console"}),". Change the parameters according to your folder structure"]}),"\n",(0,a.jsx)(e.h2,{id:"parameters",children:"Parameters"}),"\n",(0,a.jsx)(e.p,{children:"The tag path of the folder containing the tags that need to be converted."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'path = "TagPath to the parent folder" # Example "[tag_provider]Area/Motors/Motor1"\n'})}),"\n",(0,a.jsx)(e.h2,{id:"conversion-script",children:"Conversion Script"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",metastring:'title="Python"',children:'"""\nDESCRIPTION:  Script to convert Opc tags to Memory tags, Runs this script in Script Console\nPARAMS:\n\t- : path = "TagPath to the parent folder" # "[tag_provider]Area/Motors/Motor1"\nRETURN:\n\t- : Converts all the OPC tag to memory only if its Bool / Int / Float and ignoring other datatype like string\n"""\n# parameters\nimport random \npath = "TagPath to the parent folder" # "[tag_provider]Area/Motors/Motor1"\n\n# Segregating the tags\ntags = system.tag.browse(path = path,filter = {"recursive":"True"})\npaths = []\noverride_values = []\n\n# check the tag is OPC if not it skips\nfor tag in tags:\n\tfullpath \t\t= \t\tstr(tag[\'fullPath\'])\n\topc = system.tag.getAttribute(fullpath, "OPCItemPath")\n\tif opc != "":\n\t\tfullpath \t=\t \tstr(tag[\'fullPath\'])\n\t\tdatatype \t= \t\tstr(tag[\'dataType\'])\n\t   \tname\t\t=\t\tstr(tag[\'name\'])\n\t   \toverrides \t=\t\t[{"name":name, "valueSource":"memory"}]\n\t   \tpath\t\t=\t\tfullpath.replace("/"+name,"")\n\t   \t\n\t   \t# Check for the datatype and Insert values accordign to that\n\t   \tif (datatype == \'Boolean\' or datatype == \'Int4\' or datatype == \'Float4\'or datatype == \'Float8\'):   \t\t  \n\t\t   \tsystem.tag.configure(path,overrides,"m")\t\t\n\t\t\tif datatype == \'Boolean\':\n\t\t  \t\tvalue = bool(random.getrandbits(1))\n\t\t\telif datatype == \'Int4\' or datatype == \'Float4\' or datatype == \'Float8\':\n\t\t\t\tvalue = random.randint(2,100)\n\t\t\tpaths.append(fullpath)\n\t\t\toverride_values.append(value)\n\n# Writing the values to the respective tags\nsystem.tag.writeAsync(paths, override_values)\n'})}),"\n",(0,a.jsx)(e.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(e.p,{children:"To use this script, set the path parameter and run it in the Script Console:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'# Example usage\npath = "[default]Area/Motors/Motor1"  # Path to the parent folder\n\n# Run the script - it will:\n# 1. Browse all tags in the specified path\n# 2. Identify OPC tags\n# 3. Convert supported data types (Boolean, Int4, Float4, Float8) to Memory tags\n# 4. Assign random values to the converted tags\n'})}),"\n",(0,a.jsx)(e.h2,{id:"returns",children:"Returns"}),"\n",(0,a.jsx)(e.p,{children:"The script performs the following actions:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Converts OPC tags to Memory tags"}),": Changes the value source from OPC to Memory for supported data types"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Assigns initial values"}),": Sets random values based on the data type:","\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Boolean tags: Random true/false value"}),"\n",(0,a.jsx)(e.li,{children:"Int4/Float4/Float8 tags: Random integer between 2 and 100"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Writes values asynchronously"}),": Uses ",(0,a.jsx)(e.code,{children:"system.tag.writeAsync()"})," to write initial values to all converted tags"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Ignores unsupported types"}),": String and other data types are not converted"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Note"}),": If no tags are converted, verify that:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"The tag path is correct and contains OPC tags"}),"\n",(0,a.jsx)(e.li,{children:"The tags have the OPCItemPath attribute set"}),"\n",(0,a.jsx)(e.li,{children:"The tag data types are Boolean, Int4, Float4, or Float8"}),"\n"]})]})}function p(t={}){const{wrapper:e}={...(0,s.R)(),...t.components};return e?(0,a.jsx)(e,{...t,children:(0,a.jsx)(c,{...t})}):c(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>o,x:()=>i});var r=n(6540);const a={},s=r.createContext(a);function o(t){const e=r.useContext(s);return r.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function i(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:o(t.components),r.createElement(s.Provider,{value:e},t.children)}}}]);