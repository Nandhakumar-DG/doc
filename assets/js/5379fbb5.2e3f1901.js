"use strict";(globalThis.webpackChunkdev_setup=globalThis.webpackChunkdev_setup||[]).push([[7240],{4:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"Tag-scripts/change-udt-parameters","title":"Change UDT Instance Parameters","description":"Changing UDT (User Defined Type) instance parameters in Ignition allows you to dynamically update parameter values across multiple UDT instances in a specified folder. This is useful for bulk updates to configuration parameters like PLC names or other instance-specific settings.","source":"@site/scripts/Tag-scripts/change-udt-parameters.md","sourceDirName":"Tag-scripts","slug":"/Tag-scripts/change-udt-parameters","permalink":"/doc/scripts/Tag-scripts/change-udt-parameters","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"scriptsSidebar","previous":{"title":"Create TagPaths of History Provider Tags","permalink":"/doc/scripts/Tag-scripts/create-tagpaths-history-provider"},"next":{"title":"Perspective Scripts","permalink":"/doc/scripts/category/perspective-scripts"}}');var a=r(4848),s=r(8453);const i={sidebar_position:3},o="Change UDT Instance Parameters",c={},l=[{value:"Overview",id:"overview",level:2},{value:"Description",id:"description",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Configuration Script",id:"configuration-script",level:2},{value:"Usage",id:"usage",level:2},{value:"Returns",id:"returns",level:2}];function p(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"change-udt-instance-parameters",children:"Change UDT Instance Parameters"})}),"\n",(0,a.jsx)(t.p,{children:"Changing UDT (User Defined Type) instance parameters in Ignition allows you to dynamically update parameter values across multiple UDT instances in a specified folder. This is useful for bulk updates to configuration parameters like PLC names or other instance-specific settings."}),"\n",(0,a.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(t.p,{children:"This script helps you:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Query UDT instances in a specified folder"}),"\n",(0,a.jsx)(t.li,{children:"Update parameters across multiple UDT instances"}),"\n",(0,a.jsx)(t.li,{children:"Apply bulk parameter changes efficiently"}),"\n",(0,a.jsx)(t.li,{children:"Track the number of instances modified"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,a.jsxs)(t.p,{children:["This script ",(0,a.jsx)(t.strong,{children:"changes the parameters of UDT instances in a specified area of your tag tree"}),". It queries all UDT instances in the folder and updates a specific parameter with a new value. ",(0,a.jsx)(t.code,{children:"Run this script in Script Console"}),". Change the parameters according to your folder structure and requirements."]}),"\n",(0,a.jsx)(t.h2,{id:"parameters",children:"Parameters"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'Area = "TagPath to the parent folder"  # Example: "[tag_provider]Area/Motors/Motor1"\nprovider = \'default\'  # The tag provider to query\nvalue = "[NewPLC_Name]"  # The new value to assign to the parameter\nPLC = "PLC"  # The parameter name to update\n'})}),"\n",(0,a.jsx)(t.h2,{id:"configuration-script",children:"Configuration Script"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",metastring:'title="Python"',children:'"""\nDESCRIPTION:  Script to Change the Parameters of UDT instance in the tags\nPARAMS:\n\t- : Area = "TagPath to the parent folder" # "[tag_provider]Area/Motors/Motor1"\n\t- : provider = \'default\'  \n\t- : value = "[NewPLC_Name]" # PLC name passed as parameter\n\t- : PLC = "Line PLC" # Name as per your parameter\nRETURN:\n\t- : Overriders the paramters of the UDT instances in the Respective folders Specified\n\t- : If count is 0 check for the name of parameter is correct or check the tagPath is correct.\n"""\n\n# Parameters \nprovider = "default" # tagProvider Name\nArea = "[default]Area/Motor/Motor 1" # Area of parameters need to be changed\nvalue = "[NewPLC_Name]" # PLC name passed as parameter\nparameter = "PLC" # Name as per your parameter\nquery = { \n  "options": {\n    "includeUdtMembers": False,\n    "includeUdtDefinitions": True\n  },\n  "condition": {\n    "path": Area+"*",\n    "tagType": "UdtInstance",\n    "attributes": {\n      "values": [],\n      "requireAll": True\n    }\n  },\n  "returnProperties": [\n    "tagType",\n    "quality"\n  ]\n}\n\n# Counts how many tags are changed!\ncount = 0\nresults = system.tag.query(provider, query)\n\n# Creates a FullTagPath to change the parameter\nfor result in results:\n    count +=1 \n    tag_path = str(result["fullPath"]) + "/Parameters."+ parameter\n    \n    # System.tag.configure to change the parameter of the UDT instance\n    system.tag.writeBlocking(tag_path , value)\n    \nprint (count)\n'})}),"\n",(0,a.jsx)(t.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(t.p,{children:"To use this script, set the parameters according to your environment:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'# Example usage\nprovider = "default"  # Your tag provider\nArea = "[default]Area/Motor/Motor 1"  # Path to UDT instances\nvalue = "[NewPLC_Name]"  # New PLC name or value\nparameter = "PLC"  # Parameter name to update\n'})}),"\n",(0,a.jsx)(t.p,{children:"The script will:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"Query all UDT instances in the specified Area"}),"\n",(0,a.jsx)(t.li,{children:"Update the specified parameter for each instance"}),"\n",(0,a.jsx)(t.li,{children:"Return the count of modified instances"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"returns",children:"Returns"}),"\n",(0,a.jsx)(t.p,{children:"The script prints the count of UDT instances that were modified. If the count is 0, verify:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"The parameter name is correct"}),"\n",(0,a.jsx)(t.li,{children:"The tag path is correct and exists"}),"\n",(0,a.jsx)(t.li,{children:"The UDT instances exist in the specified folder"}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>i,x:()=>o});var n=r(6540);const a={},s=n.createContext(a);function i(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);