"use strict";(globalThis.webpackChunkdev_setup=globalThis.webpackChunkdev_setup||[]).push([[4009],{1253:(t,e,n)=>{n.d(e,{A:()=>i});const i=n.p+"assets/images/download-svg-from-ignition2-e7de44a8a36935e35be9adbe64912cab.png"},3902:(t,e,n)=>{n.d(e,{A:()=>i});const i=n.p+"assets/images/download-svg-from-ignition1-8b3d9f05b3f99414073fbefe314672b9.png"},5463:(t,e,n)=>{n.d(e,{A:()=>i});const i=n.p+"assets/images/download-svg-from-ignition-9ae1db3a0f04a256654f978ff62945ca.png"},7273:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Perspective-scripts/download-svg-from-ignition","title":"Download SVG from Ignition","description":"Downloading SVG (Scalable Vector Graphics) from Ignition views allows you to export vector graphics for further processing, storage, or use in external applications. This is useful for creating backups of view graphics, integrating with design tools, or programmatically manipulating SVG elements.","source":"@site/scripts/Perspective-scripts/download-svg-from-ignition.md","sourceDirName":"Perspective-scripts","slug":"/Perspective-scripts/download-svg-from-ignition","permalink":"/doc/scripts/Perspective-scripts/download-svg-from-ignition","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"scriptsSidebar","previous":{"title":"Perspective Scripts","permalink":"/doc/scripts/category/perspective-scripts"}}');var s=n(4848),r=n(8453);const o={sidebar_position:4},a="Download SVG from Ignition",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Description",id:"description",level:2},{value:"Parameters",id:"parameters",level:2},{value:"Download Script",id:"download-script",level:2},{value:"Usage",id:"usage",level:2},{value:"Returns",id:"returns",level:2}];function d(t){const e={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"download-svg-from-ignition",children:"Download SVG from Ignition"})}),"\n",(0,s.jsx)(e.p,{children:"Downloading SVG (Scalable Vector Graphics) from Ignition views allows you to export vector graphics for further processing, storage, or use in external applications. This is useful for creating backups of view graphics, integrating with design tools, or programmatically manipulating SVG elements."}),"\n",(0,s.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(e.p,{children:"This script helps you:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Extract SVG data from Ignition Perspective views"}),"\n",(0,s.jsx)(e.li,{children:"Convert SVG objects to formatted XML strings"}),"\n",(0,s.jsx)(e.li,{children:"Copy SVG data to clipboard for easy sharing"}),"\n",(0,s.jsx)(e.li,{children:"Write SVG files to Notepad and save as svg file"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"description",children:"Description"}),"\n",(0,s.jsxs)(e.p,{children:["This script extracts SVG graphics from Ignition Perspective view objects and converts them to a formatted XML string. The resulting SVG can be copied to the clipboard or saved to a file. ",(0,s.jsx)(e.code,{children:"Run this script in Script Console"}),". This is particularly useful for backing up view graphics or integrating with external design applications."]}),"\n",(0,s.jsx)(e.h2,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsx)(e.p,{children:"Copy the SVG file before running the script in script console."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"download-svg-from-ignition",src:n(5463).A+"",width:"608",height:"193"})}),"\n",(0,s.jsx)(e.h2,{id:"download-script",children:"Download Script"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",metastring:'title="Python"',children:"from java.awt.datatransfer import StringSelection\nfrom java.awt.datatransfer import Clipboard\nfrom java.awt import Toolkit\n\ndef setup():\n\tglobal toolkit, clipboard\n\t\n\ttoolkit = Toolkit.getDefaultToolkit()\n\tclipboard = toolkit.getSystemClipboard()\n\ndef writeText(text):\n\tsetup()\n\tclipboard.setContents(StringSelection(text), None)\n\ndef readText():\n\tsetup()\n\tfrom java.awt.datatransfer import DataFlavor\n\tcontents = clipboard.getContents(None)\n\treturn contents.getTransferData(DataFlavor.stringFlavor)\n\nimport xml.etree.cElementTree as et\nimport json\nimport copy\n\ndef extract_svg_from_view(obj):\n\t#json_str = clipboard.getClipboard()\n\tif '[\n\t{\n\t\t\"type\": \"ia.shapes.svg\",\n\t\t\"version\": 0,\n\t\t\"props\": [\n\t\t\t\"viewBox\": \"0 0 185-527 92\",\n\t\t\t\"name\": \"SVG_1\",\n\t\t\t\"#fill\": [\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"style\": {\n\t\t\t\t\t\"paint\": {\n\t\t\t\t\t\t\"fillColor\": \"#000000\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"width\": \"10\"\n\t\t\t},\n\t\t\t[\n\t\t\t\t\"style\": {\n\t\t\t\t\t\"paint\": {\n\t\t\t\t\t\t\"fillColor\": \"#000000\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t\"width\": \"10\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"type\": \"circle\",\n\t\t\t\t\"name\": \"circle48\",\n\t\t\t\t\"cx\": \"64.685\",\n\t\t\t\t\"cy\": \"92.5\",\n\t\t\t\t\"r\": \"64.685\"\n\t\t\t],\n\t\t\t[\n\t\t\t\t\"TEST_Export\"\n\t\t\t],\n\t\t\t\"position\": [\n\t\t\t\t\"basis\": \"20px\"\n\t\t\t],\n\t\t\t\"custom\": []\n\t\t]\n\t]\n\t#assume that the obj passed in is a copied `SVG` from a Perspective View which adds the SVG\n\t# definition into a single item array. We want the item\n\tviewbox = svg_obj['props']['viewBox']\n\telements = svg_obj['props']['elements']\n\n\tATTR_LOOKUP = {}\n\tATTR_LOOKUP['id'] = 'id'\n\tATTR_LOOKUP['fill.paint'] = 'fill'\n\tATTR_LOOKUP['fill.opacity'] = 'opacity'\n\tATTR_LOOKUP['stroke.paint'] = 'stroke'\n\tATTR_LOOKUP['stroke.linecap'] = 'stroke-linecap'\n\tATTR_LOOKUP['stroke.width'] = 'stroke-width'\n\tATTR_LOOKUP['style.stroke.width'] = 'stroke-width'\n\tATTR_LOOKUP['style.vector-effect'] = 'vector-effect'\n\n\tdoc = et.Element('svg', viewBox=viewbox, version='1.1', xmlns='http://www.w3.org/2000/svg')\n\tnot_included_SVG_elements = []\n\tdef addElements(xmlobj, elements):\n\t\tfor element in elements:\n\t\t\tif 'type' in element:\n\t\t\t\tattrs_dict = {}\n\t\t\t\t\n\t\t\t\t# collect the attributes for the current SVG element are store them in a dictionary\n\t\t\t\tfor attr_name in element:\n\t\t\t\t\t# if exclude any nested elements as they need to be added later. These are not added as attributes\n\t\t\t\t\tif attr_name != 'elements':\n\t\t\t\t\t\t# if the attribute is a dict in Ignition, then the dict will contain the actual attribute names\n\t\t\t\t\t\tif isinstance(attr, dict):\n\t\t\t\t\t\t\tfor prop_name in attr:\n\t\t\t\t\t\t\t\tsvg_prop_name = ATTR_LOOKUP.get('{}'.format(attr_name, prop_name), 'UNSET')\n\t\t\t\t\t\t\t\tif svg_prop_name == 'UNSET':\n\t\t\t\t\t\t\t\t\tnot_included_SVG_elements.append('{}'.format(attr_name, prop_name))\n\t\t\t\t\t\t\n\t\t\t\t\t\tsvg_prop_val = attr[prop_name]\n\t\t\t\t\n\t\t\t\tattrs_dict[svg_prop_name] = svg_prop_val\n\t\t\t\n\t\t\telse:\n\t\t\t\tattrs_dict[ATTR_LOOKUP.get(attr_name, attr_name)] = attr\n\t\t\t\n\t\t\telement_name = attrs_dict['type']\n\t\t\tif element_name == 'group':\n\t\t\t\telement_name = 'g'\n\t\t\t\n\t\t\txmlobj_attr = et.SubElement(xmlobj, element_name, **attrs_dict)\n\t\t\t\n\t\t\tif 'elements' in element:\n\t\t\t\tattr_elements = copy.deepcopy(element['elements'])\n\t\t\t\n\t\t\taddElements(xmlobj_attr, attr_elements)\n\n\taddElements(doc, elements)\n\t#print ET.tostring(doc, encoding='utf8', method='xml')\n\n\tif not_included_SVG_elements != []:\n\t\tprint 'Copied to clipboard, but some SVG attributes are missing mapping. These have not been extracted'\n\t\t[''.format(not_included_SVG_elements)]\n\n\treturn et.tostring(doc)\n\njson = readText()\nobj = system.util.jsonDecode(json)\nsvg = extract_svg_from_view(obj)\nwriteText(svg)\n"})}),"\n",(0,s.jsx)(e.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(e.p,{children:"To use this script, copy an SVG object from an Ignition Perspective view and run this script:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"# Step 1: In Ignition Perspective, copy the SVG component to clipboard\n# Step 2: Run this script in the Script Console\n\n# The script will:\n# 1. Read the copied SVG data from clipboard\n# 2. Parse the JSON representation of the SVG\n# 3. Extract SVG elements and attributes\n# 4. Convert to formatted XML\n# 5. Write the result back to clipboard\n\n# Step 3: Open a new file in notepad\n# Step 4: paste the copied text and save as .svg file\n\n"})}),"\n",(0,s.jsx)(e.p,{children:"After running the script the svg configurations will be copied to your clipboard, Open a new file in notepad and paste the copied text"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"download-svg-from-ignition",src:n(3902).A+"",width:"1417",height:"815"})}),"\n",(0,s.jsx)(e.p,{children:"And save as .svg file"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"download-svg-from-ignition",src:n(1253).A+"",width:"1177",height:"663"})}),"\n",(0,s.jsx)(e.h2,{id:"returns",children:"Returns"}),"\n",(0,s.jsx)(e.p,{children:"The script performs the following actions:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Extracts SVG from Clipboard"}),": Reads the copied SVG object from the system clipboard"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Parses SVG Structure"}),": Converts the Ignition SVG JSON format to XML elements"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Maps Attributes"}),": Converts Ignition attribute names to standard SVG attributes using ATTR_LOOKUP table"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Creates XML Document"}),": Builds a properly formatted SVG XML document with:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"viewBox attribute"}),"\n",(0,s.jsx)(e.li,{children:"SVG version (1.1)"}),"\n",(0,s.jsx)(e.li,{children:"Proper namespace declaration"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Handles Nested Elements"}),": Recursively processes nested elements (groups, circles, paths, etc.)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Returns to Clipboard"}),": Writes the formatted SVG XML back to the clipboard for pasting"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Saves as SVG File"}),": When you paste the content into Notepad and save it as a .svg file, the file is saved in proper SVG format"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Important Notes"}),":"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["If some SVG attributes are missing mapping:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"The script will print a warning message"}),"\n",(0,s.jsx)(e.li,{children:"Check the ATTR_LOOKUP table to add missing attribute mappings"}),"\n",(0,s.jsx)(e.li,{children:"Common attributes like id, fill, stroke, width, and opacity are pre-mapped"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Error Handling"}),": If the script is run before copying the SVG component from Ignition Perspective, it will throw an error because there is no SVG data in the clipboard","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Always copy the SVG component first before running this script"}),"\n",(0,s.jsx)(e.li,{children:"Ensure the SVG is properly copied to the clipboard from Ignition"}),"\n"]}),"\n"]}),"\n"]})]})}function p(t={}){const{wrapper:e}={...(0,r.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(d,{...t})}):d(t)}},8453:(t,e,n)=>{n.d(e,{R:()=>o,x:()=>a});var i=n(6540);const s={},r=i.createContext(s);function o(t){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function a(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:o(t.components),i.createElement(r.Provider,{value:e},t.children)}}}]);